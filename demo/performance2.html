<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>指定时间运行的次数</title>
</head>
<body>
    <script src="../dist/index.aio.js"></script>
    <script>
        var clone = jsmini_clone.clone;
        var cloneJSON = jsmini_clone.cloneJSON;
        var cloneLoop = jsmini_clone.cloneLoop;
        var cloneForce = jsmini_clone.cloneForce;

        var data = {};
        var temp = data;
        for(var i = 0; i < 500; i++) {
            temp = temp['data'] = {};
            for (var j = 0; j < 1; j++) {
                temp[j] = j;
            }
        }

        function runTime(fn, time) {
            var stime = Date.now();
            var count = 0;
            while(Date.now() - stime < time) {
                fn();
                count++;
            }

            return count;
        }

        function run(list) {
            if (list.length === 0) return;

            console.log('2000ms内运行的次数：', list[0]());

            setTimeout(function () {run(list.slice(1))}, 1000);
        }

        var list = [
            function () {return runTime(function() {clone(data)}, 2000)},
            function () {return runTime(function() {cloneJSON(data)}, 2000)},
            function () {return runTime(function() {cloneLoop(data)}, 2000)},
            function () {return runTime(function() {cloneForce(data)}, 2000)},
        ];
        run(list)
    </script>
</body>
</html>
